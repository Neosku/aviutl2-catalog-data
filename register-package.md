# パッケージ登録方法

## 登録画面の開き方
本ソフトサイドバーの **パッケージ登録** を選択してください

---

## 一般情報の入力項目

| 項目名 | 説明 |
|--------|------|
| **ID** | パッケージの識別子です。英数字が使用できます。<br>形式は `作者名.パッケージ名` としてください。<br>例：`Kenkun.AviUtlExEdit2` |
| **パッケージ名** | パッケージの名称を入力してください。日本語も使用可能です。 |
| **作者名** | パッケージの作者名を入力してください。日本語も使用可能です。 |
| **オリジナル作者名（任意）** | 元となるパッケージがある場合、作者名を入力してください。日本語も使用可能です。 |
| **種類** | パッケージの種類を入力してください。<br>例：入力プラグイン / 出力プラグイン / 汎用プラグイン / スクリプト / 言語ファイル など |
| **パッケージのサイト** | パッケージに関するページのURLを入力してください。<br>X（旧Twitter）やニコニコ動画のリンクでも構いません。 |
| **ニコニ・コモンズID** | ニコニ・コモンズIDを入力してください。<br> 作者の方が紹介動画をニコニコ動画で上げている場合はその動画のIDを入力してください。 |
| **依存パッケージ** | 依存関係のあるパッケージIDを入力してください。<br>※現在は未対応です |
| **タグ** | タグを入力します。複数指定可能で、自由に設定できます。<br>既存タグを選択することもできますが、新しくタグを追加していただいても構いません。（Enterで入力できます） |
| **概要** | パッケージの概要を35文字以内で入力してください。 |
| **詳細** | アプリ内入力の場合：パッケージの詳細な説明を **Markdown形式** で入力してください。 <br>外部MDリンクの場合：外部のMarkdownを入力してください。GitHub上のMarkdownを登録される場合はhttps://raw.githubusercontent.com/ から始まるURLを入力してください。 |
---

## ライセンスの入力項目

| 項目名 | 説明 |
|--------|------|
| **種類** | ライセンスが選択肢にある場合はそれを選んでください。ない場合はその他を選択してください。わからない場合は不明を選択してください |
| **テンプレートを使用する** | ライセンスのテンプレートを用意しています。著作権年や著作権者を入力してください。プレビューができますので、ライセンスとあっているか確認してください。 |
| **ライセンス本文** | テンプレートを用いない場合に入力してください。ライセンスの本文を入力してください。 |

## 画像の入力項目
| 項目名 | 説明 |
|--------|------|
| **サムネイル画像** | パッケージ一覧画面に表示される画像を登録します。縦横比はできる限り1:1になるようにしてください。<br>推奨サイズ：206x206px<br>対応形式：PNG, JPG |
| **説明画像** | パッケージ詳細ページに表示される画像を登録します。縦横比は16:9を推奨します。<br>対応形式：PNG, JPG |

## インストーラー
### ダウンロード元
現在、以下の4種類のインストーラーソースに対応しています。

### 1. 直接URLの場合
直接ダウンロードできるファイルのURLを入力してください。

### 2. GitHub Releaseの場合
- **GitHubアカウント名**
- **レポジトリ名**
- **ダウンロードファイル名**（正規表現対応）
ダウンロードファイル名は正規表現に対応しています。
例：ダウンロードしたいファイルが`test_v1.0.zip`の場合`^test.*\.zip$`となります。  
（`^`：文字列の先頭、`$`：文字列の末尾、`.*`：任意の文字列、`\.`：ドット）  

ダウンロードするリリースは「最新のタグが付いたリリース」（ない場合は一番最新にリリースされたものをダウンロードします）です。

### 3. Google Driveの場合
URLではなく **ファイルID** を入力してください。  
ファイルを 共有 → リンクをコピー を用いて作成した際にURL末尾にある文字列がファイルIDです。　　
例：`https://drive.google.com/file/d/1A2B3C4D5E6F7G8H9I0J/view?usp=drive_link` の場合、ファイルIDは `1A2B3C4D5E6F7G8H9I0J` です。

### 4. BOOTHの場合
BOOTHのダウンロードページURLを入力してください。
ダウンロードボタンを右クリックして、リンクのアドレスをコピーで取得できます。  
https://booth.pm/downloadables/ から始まるURLです。  
例：`https://booth.pm/downloadables/123456`

---


## インストール手順

インストール時の処理には以下の4種類があります。

1. **ダウンロード**
2. **ZIP展開**
3. **EXE実行**
4. **コピー**

### ダウンロード,ZIP展開
ダウンロードと ZIP 展開は、パスを指定する必要はありません。  
インストール実行時に自動作成される一時フォルダ`{tmp}`に保存/展開されます。

### EXE実行
- 実行パスは下記に示す **使用可能な変数** を使用してください。
- 実行時に渡される引数も指定できます。

### コピー
- コピー元、コピー先を指定してください。
- パスの指定には **変数** を使用してください。
- コピー元はファイル、またはフォルダを指定できます。コピー先はフォルダを指定してください。  

例：
ファイル構成
```
FolderA\
    FolderB\
        input.aui2
        input\
            data.dat
            config.json
    FolderC\
        script.anm2
    
```
の場合、  
コピー元：`{tmp}/FolderA/FolderB`、コピー先：`{pluginsDir}`でFolderB内のファイルがすべてプラグインフォルダにコピーされます。  
コピー元：`{tmp}/FolderA/FolderC/script.anm2`、コピー先：`{scriptsDir}`でscript.anm2がスクリプトフォルダにコピーされます。



---

## アンインストールステップ

アンインストール時に使用できるステップは以下の2種類です。

1. **削除**
2. **EXE実行**

---

## バージョン管理について

本ソフトでは、バージョン管理に **ハッシュ値** を使用します。  
主要なファイル（例：プラグインの場合 `.aui2` や `.auo2`）のみを選択し、ハッシュ値を計算してください。


### 使用可能な変数
以下の変数が使用可能です。

- `{tmp}`: パッケージごと、バージョンごと自動で作成される一時フォルダです。　ダウンロード先やZIP展開先として使用します。
- `{pluginsDir}`: プラグイン配置先
- `{scriptsDir}`: スクリプト配置先
- `{dataDir}`: aviutlのデータ保存先（Language, Plugin, Scriptの親フォルダ）


